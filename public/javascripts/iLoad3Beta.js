L = iload = iLoad = {
	
	// *****************************************************************************************************
	// Javascript галерея iLoad 3, версия beta 0.8
	// Автор Aleko
	// Подробная информация и обновления по адресу http://studioad.ru/index/0-8
	// Распространяется бесплатно при условии сохранения целостности скрипта
	// *****************************************************************************************************
	
	loaderPath:"http://ismailov.net/images/wait.gif", // адрес картинки процесса загрузки
	
	// Настройки скорости анимации:
	
	overlayAppearSpeed: 300, // скорость появления тени в мс
	overlayDisappearSpeed: 200, // скорость исчезновения тени в мс
	containerAppearSpeed: 300, // скорость появления вьюпорта в мс
	containerDisappearSpeed: 300, // скорость исчезновения вьюпорта в мс
	containerResizeSpeed: 300, // скорость анимации изменения размера вьюпорта
	contentAppearSpeed: 300, // скорость появления контента в мс
	contentDisappearSpeed: 300, // скорость исчезновения контента в мс
	loaderAppearSpeed: 200, // скорость появления загрузчика в мс
	loaderDisappearSpeed: 200, // скорость исчезновения загрузчика в мс
	windowResizeSpeed: 300, // скорость подстройки под размеры окна в мс
	panelAppearSpeed: 300, // скорость появления панели в мс
	panelDisappearSpeed: 300, // скорость исчезновения панели в мс
	arrowsSpeed: 200, // скорость движения стрелок в мс
	
	// Настройки отступов и углов:
	
	paddingFSE:36, // отступ от границ экрана в пикселях при подгонке под них
	contentPadding: 3, // отступ контента от внутренних границ (так же влияет на отступ панели от вьпорта и текста от изображения)
	cornersSize: 10, // размер радиуса сглаженных углов (так же влияет на отступ панели от вьпорта и текста от изображения)
	
	// Настройки цветов и прозрачности
	
	overlayOpacity: 95, // прозрачность тени под вьюпортом
	overlayBackground:"#000", // бэкграунд тени в формате css(цвет или изображение)
	containerColor:"#FFF", // цвет вьюпорта (hex формат)
	
	// Настройки навигации
	
	panelType: "big", // тип панели управления сетом фотографий ("big","small")
	hidePWS: true, // прятать панель на время изменения размеров вьюпорта? (true,false)
	forceCloseBut:false, // всегда ли выводить кнопку закрытия вьюпорта на маленькой панели? (true,false)
	arrows: true, // отображать стрелки при навигации нажатием на части изображения? (true,false)
	imageNav: true, // использовать навигацию нажатием на части изображения? (true,false)
	keyboard: true, // включить управление с клавиатуры? (true,false)
	draganddrop: true, // включить возможность передвигать вьюпорт мышкой? (true,false)
	preloadNeighbours: true, // предзагружать соседние фотографии в сете для удобства просмотра? (true,false)
	
	// Настройки выводимой информации
	
	forceOriginalSize:false, // всегда открывать в фотографию оригинальном размере? (true,false)
	info:false, // выводить формат и размер изображения? (true,false)
	groupInfoText: [
					'<b>[IMAGE_NUM]</b> из <b>[TOTAL_NUM]</b>', // вид написания информации о позиции
					' in group "[GROUP_NAME]"' // вид написания информации о группе
					],
	fileInfoText: "В формате <b>[FORMAT]</b> размером <b>[WIDTH]х[HEIGHT]</b> в пикселей", // вид написания информации о файле
	tips:[
		  'Previous image', // подсказка к кнопке "назад"
		  'Next image', // подсказка к кнопке "вперед"
		  'Close gallery', // подсказка к кнопке "закрыть"
		  'Slideshow', // подсказка к кнопке "плей"
		  'Pause slideshow', // подсказка к кнопке "пауза"
		  'Original size', // подсказка к кнопке "открыть в исходном размере"
		  'Resize to window' // подсказка к кнопке "уместить в окно"
		  ],
	
	// Настройки вида текста
	
	font:"Tahoma, Arial", // тип шрифта на панели описания фотографии
	fontSize:"11px", // размер шрифта
	fontNameColor:"#919191", // цвет шрифта имени
	fontColor:"#919191", // цвет шрифта остального текста
	
	// Настройки слайдшоу
	
	slideshowTime: 3000, // интервал переключения фотографий в слайдшоу в мс
	slideshowRound: false, // показывать фотографии в слайдшоу в бесконечном цикле? (true,false)
	slideshowClose: false, // закрывать iLoad в конце слайдшоу? (true,false)
	
	ie:!-[1,],i:function(g,e){var j=false,f=document,i=f.documentElement,c=f.body,h=f.compatMode=="CSS1Compat";switch(g){case 1:j=h?i.clientWidth:c.clientWidth;break;case 2:j=h?i.clientHeight:c.clientHeight;break;case 3:j=c.scrollLeft||i.scrollLeft;break;case 4:j=c.scrollTop||i.scrollTop;break;case 5:j=(e||window.event).clientX;break;case 6:j=(e||window.event).clientY;break}return j},ready:null,opened:false,animating:false,animator:[],anielems:0,iSizeChanged:false,bigpanelOpen:false,imprev:0,imthis:0,imnext:0,size:"computed",output:"",total:0,groupName:"",imageName:"",imageDesc:"",num:0,cursorpos:3,curx:0,cury:0,slideshow:0,animate:function(i,g,j,h){for(key in g){f(key,g[key])}function f(d,b){var a=L.anielems,c,k,e=d=="opacity";for(;a--;){if(L.animator[a]){if(L.animator[a].o==i&&L.animator[a].p==d){clearInterval(L.animator[a].timer);L.animator.splice(a,1,null);k=a}}}switch(d){case"opacity":if(L.ie){c=i.style.filter?parseFloat(i.style.filter.match(/\d+/)):100}else{c=i.style.opacity?parseFloat(i.style.opacity):1;b=b/100}break;case"marginTop":c=parseInt(i.style.marginTop||0);break;case"marginLeft":c=parseInt(i.style.marginLeft||0);break;case"width":c=i.offsetWidth;break;case"height":c=i.offsetHeight;break;case"top":c=i.offsetTop;break;case"left":c=i.offsetLeft;break;case"right":c=parseInt(i.style.right||0);break;case"bottom":c=parseInt(i.style.bottom||0);break}if(!k){k=L.anielems++}if(j>0){L.animator[k]={o:i,p:d,start:new Date().getTime(),timer:setInterval(function(){var p=(new Date().getTime())-L.animator[k].start,m=p/j;if(e){var o=(b-c)*m+c;if(L.ie){i.style.filter="alpha(opacity="+o+")"}else{i.style.opacity=o}}else{i.style[d]=(b-c)*(m<0.5?Math.pow(2*m,3)+0*1:2-Math.pow(2*(1-m),3))/2+c+"px"}if(m>=1){clearInterval(L.animator[k].timer);L.animator.splice(k,1,null);if(e){if(L.ie){i.style.filter=b==100?"":"alpha(opacity="+b+")"}else{i.style.opacity=b}}else{i.style[d]=b+"px"}if(h){h()}}},10)}}else{if(e){if(L.ie){i.style.filter=b==100?"":"alpha(opacity="+b+")"}else{i.style.opacity=b}}else{i.style[d]=b+"px"}if(h){h()}}}},next:function(){if(L.opened&&L.ready&&L.total>1&&L.num<L.total&&!L.animating){L.image(L.output,L.groupName,L.num+1)}},prev:function(){if(L.opened&&L.ready&&L.total>1&&L.num>1&&!L.animating){L.image(L.output,L.groupName,L.num-1)}},openPanel:function(b){L.bigpanelOpen=true;if(L.panelType=="big"){L.box.appendChild(L.bigpanel);L.animate(L.bigpanel,{bottom:-(36+L.cornersSize+L.contentPadding)},L.panelAppearSpeed,function(){if(b){L.animate(L.bigpanel,{width:200,marginLeft:-100},L.panelAppearSpeed,function(){L.iSizeChanged=true})}})}},closePanel:function(d){L.bigpanelOpen=false;var c=function(){L.loadcont.appendChild(L.bigpanel)};if(L.panelType=="big"){if(L.iSizeChanged){L.animate(L.bigpanel,{width:152,marginLeft:-76},L.panelDisappearSpeed,function(){L.animate(L.bigpanel,{bottom:4},L.panelDisappearSpeed,function(){c();if(d){d()}})})}else{L.animate(L.bigpanel,{bottom:4},L.panelDisappearSpeed,function(){c();if(d){d()}})}}},comp:function(){if(L.opened&&L.ready&&!L.animating){L.size="computed!";L.image(L.output,L.groupName,L.num)}},orig:function(){if(L.opened&&L.ready&&!L.animating){L.size="original";L.image(L.output,L.groupName,L.num)}},create:function(){var build=function(i){return document.createElement(i)},add=function(i,e){i.appendChild(e)},css=function(i,e){i.style.cssText=e},_=null,__=function(){if(_){clearTimeout(_);_=null}_=setTimeout(L.center,100)},___=function(event){L.curx=L.i(5,event);L.cury=L.i(6,event)};if(L.ready==null){if(L.ie){window.attachEvent("onresize",__);document.body.attachEvent("onmousemove",___);document.attachEvent("onclick",L.travers);document.attachEvent("onkeydown",L.keys)}else{window.addEventListener("resize",__,false);document.body.addEventListener("mousemove",___,false);document.addEventListener("click",L.travers,false);document.addEventListener("keydown",L.keys,false)}}if(!L.ready){L.ready=true;this.panel=build("div");this.bigpanel=build("div");this.overlay=build("div");this.wrap=build("div");this.box=build("div");this.tc=build("div");this.bc=build("div");this.arrl=build("div");this.arrr=build("div");this.ir=build("div");this.or=build("div");this.wait=build("img");this.contentOverlay=build("div");this.content=build("div");this.details=build("div");this.hidedet=build("div");this.loadcont=build("div");L.bigpanel.className="L_panel_big";L.overlay.className="L_overlay";L.loadcont.className="L_loadcont";L.contentOverlay.className="L_contoverlay";L.arrl.className="L_arrl";L.arrr.className="L_arrr";L.wrap.className="L_wrap";L.box.className="L_box";L.wait.className="L_wait";css(L.panel,"position:absolute;left:"+parseInt(L.cornersSize+L.contentPadding)+"px;bottom:"+parseInt(L.cornersSize*2+L.contentPadding)+"px;font-family:"+L.font+";font-size:"+L.fontSize+";color:"+L.fontColor);css(L.wrap,"display:none;opacity:0;filter:alpha(opacity=0);");css(L.overlay,"display:none;opacity:0;filter:alpha(opacity=0);background:"+L.overlayBackground);css(L.bc,"z-index:9997;margin:0 "+L.cornersSize+"px 0 "+L.cornersSize+"px;background:"+L.containerColor+";height:"+L.cornersSize+"px;position:relative;");css(L.tc,"z-index:9997;margin:0 "+L.cornersSize+"px 0 "+L.cornersSize+"px;background:"+L.containerColor+";height:"+L.cornersSize+"px;position:relative;");css(L.arrl,"margin-bottom:"+-L.cornersSize+"px;");css(L.arrr,"margin-bottom:"+-L.cornersSize+"px;");css(L.bigpanel,"margin-left:-76px;");css(L.ir,(/*@cc_on @_jscript_version==5.8 @*/+0?"margin-bottom:-"+L.cornersSize*2+"px;":"margin-")+"top:-"+L.cornersSize*2+"px;z-index:9997;position:relative;height:100%;overflow:hidden;");css(L.or,"margin-top:"+L.cornersSize*2+"px;background:"+L.containerColor+";z-index:9997;position:relative;height:100%;overflow:hidden;");css(L.content,"padding:"+L.contentPadding+"px;margin:0 "+L.cornersSize+"px 0 "+L.cornersSize+"px;");L.contentOverlay.innerHTML='<b style="background:'+L.containerColor+';"></b>';L.arrl.innerHTML="<b></b>";L.arrr.innerHTML="<b></b>";add(document.body,L.loadcont);add(L.loadcont,L.wait);L.wait.onload=function(){css(L.wait,"margin:-"+parseInt(L.cornersSize+L.wait.offsetHeight/2)+"px 0 0 -"+L.wait.offsetWidth/2+"px;");add(L.or,L.wait)};L.wait.src=L.loaderPath;add(L.or,L.content);add(L.ir,L.or);add(L.wrap,L.box);add(L.or,L.contentOverlay);add(L.box,L.tc);add(L.box,L.ir);add(L.box,L.bc);add(L.loadcont,L.arrl);add(L.loadcont,L.arrr);add(document.body,L.overlay);add(document.body,L.wrap);if(L.cornersSize>0){if(L.ie){var ielist=document.createStyleSheet();ielist.addRule("v\\:roundrect","behavior: url(#default#VML);display:inline-block;position:absolute;");var e=parseInt(L.cornersSize*2-1);L.tc.innerHTML='<div id="L_ltc" style="margin:0 0 0 -'+L.cornersSize+"px;width:"+L.cornersSize+"px;height:"+L.cornersSize+'px"><v:roundrect fillcolor="#'+L.containerColor+'" strokeWeight:"1px" strokeColor="#'+L.containerColor+'" arcSize="'+L.cornersSize+'" style="width:'+e+"px;height:"+e+'px;left:0px;top:0px;"></v:roundrect></div><div id="L_rtc" style="margin:0 -'+L.cornersSize+"px 0 0;width:"+L.cornersSize+"px;height:"+L.cornersSize+'px"><v:roundrect fillcolor="#'+L.containerColor+'" strokeWeight:"1px" strokeColor="#'+L.containerColor+'" arcSize="'+L.cornersSize+'" style="width:'+e+"px;height:"+e+"px;left:-"+L.cornersSize+'px;top:0px;"></v:roundrect></div>';L.bc.innerHTML='<div id="L_lbc" style="margin:0 0 0 -'+L.cornersSize+"px;width:"+L.cornersSize+"px;height:"+L.cornersSize+'px"><v:roundrect fillcolor="#'+L.containerColor+'" strokeWeight:"1px" strokeColor="#'+L.containerColor+'" arcSize="'+L.cornersSize+'" style="width:'+e+"px;height:"+e+"px;left:0px;top:-"+L.cornersSize+'px;"></v:roundrect></div><div id="L_rbc" style="margin:0 -'+L.cornersSize+"px 0 0;width:"+L.cornersSize+"px;height:"+L.cornersSize+'px"><v:roundrect fillcolor="#'+L.containerColor+'" strokeWeight:"1px" strokeColor="#'+L.containerColor+'" arcSize="'+L.cornersSize+'" style="width:'+e+"px;height:"+e+"px;left:-"+L.cornersSize+"px;top:-"+L.cornersSize+'px;"></v:roundrect></div>'}else{L.tc.innerHTML='<canvas id="L_ltc" style="margin:0 0 0 -'+L.cornersSize+'px" width="'+L.cornersSize+'" height="'+L.cornersSize+'"></canvas><canvas id="L_rtc" style="margin:0 -'+L.cornersSize+'px 0 0" width="'+L.cornersSize+'" height="'+L.cornersSize+'"></canvas>';L.bc.innerHTML='<canvas id="L_lbc" style="margin:0 0 0 -'+L.cornersSize+'px" width="'+L.cornersSize+'" height="'+L.cornersSize+'"></canvas><canvas id="L_rbc" style="margin:0 -'+L.cornersSize+'px 0 0" width="'+L.cornersSize+'" height="'+L.cornersSize+'"></canvas>';var ltc=document.getElementById("L_ltc").getContext("2d");var rtc=document.getElementById("L_rtc").getContext("2d");var lbc=document.getElementById("L_lbc").getContext("2d");var rbc=document.getElementById("L_rbc").getContext("2d");ltc.beginPath();ltc.fillStyle=L.containerColor;ltc.arc(L.cornersSize,L.cornersSize,L.cornersSize,0,Math.PI,true);ltc.fill();rtc.beginPath();rtc.fillStyle=L.containerColor;rtc.arc(0,L.cornersSize,L.cornersSize,0,Math.PI,true);rtc.fill();lbc.beginPath();lbc.fillStyle=L.containerColor;lbc.arc(L.cornersSize,0,L.cornersSize,0,Math.PI*2,true);lbc.fill();rbc.beginPath();rbc.fillStyle=L.containerColor;rbc.arc(0,0,L.cornersSize,0,Math.PI*2,true);rbc.fill()}}}},destroy:function(){if(L.ready){if(L.opened){L.hide()}L.stop();document.body.removeChild(L.overlay);document.body.removeChild(L.wrap);document.body.removeChild(L.loadcont);L.ready=false;L.opened=false;L.animating=false}},recreate:function(){L.destroy();L.create()},center:function(d){if(L.ready){var f=L.i(1)/2-L.box.offsetWidth/2,e=L.i(2)/2-L.box.offsetHeight/2-(L.panelType=="big"&&L.opened?(18+L.cornersSize/2):0);if(d==1){L.box.style.top=(e<0?0:e)+"px";L.box.style.left=(f<0?0:f)+"px";L.wrap.style.top=L.i(4)+"px";L.wrap.style.left=L.i(3)+"px"}else{L.animate(L.wrap,{top:L.i(4),left:L.i(3)},L.windowResizeSpeed,function(){L.animate(L.box,{top:e<0?0:e,left:f<0?0:f},L.windowResizeSpeed)})}}},scale:function(f,h,g){if(L.ready&&L.opened){var e=function(){var a=L.i(1)/2-f/2,b=L.i(2)/2-h/2-(L.panelType=="big"?(18+L.cornersSize/2):0);b=b<0?0:b;a=a<0?0:a;if(f==L.box.offsetWidth&&h==L.box.offsetHeight&&!L.animating){if(g){g()}}else{if(!L.animating){L.animating=true;L.removeAll();L.animate(L.box,{top:b,left:a,width:f,height:h},L.containerResizeSpeed,function(){L.pasteAll();L.animating=false;if(g){g()}})}}};e()}},show:function(b){if(L.ready&&!L.opened&&!L.animating){L.overlay.style.display="";L.animate(L.overlay,{opacity:L.overlayOpacity},L.overlayAppearSpeed,function(){L.wrap.style.display="";L.center(1);L.animate(L.wrap,{opacity:100},L.containerAppearSpeed,function(){L.wrap.style.filter="";L.opened=true;if(b){b()}})})}else{if(L.ready&&!L.animating){if(b){b()}}}},hide:function(){if(L.opened&&L.ready){L.stop();L.contentOverlay.style.visibility="visible";L.animate(L.contentOverlay,{opacity:100},L.contentDisappearSpeed,function(){L.wait.style.visibility="hidden";L.removeAll();L.animate(L.wrap,{opacity:0},L.containerDisappearSpeed,function(){L.wrap.style.display="none";L.animate(L.overlay,{opacity:0},L.overlayDisappearSpeed,function(){L.pasteAll();L.overlay.style.display="none";L.content.innerHTML="";L.opened=false;L.animating=false;L.closePanel()})})})}},keys:function(a){if(L.keyboard&&L.opened&&L.ready){var b=function(){if(L.ie){window.event.returnValue=false}else{a.preventDefault()}},g=a.keyCode,h=String.fromCharCode(g).toLowerCase();if(g==27||h=="d"){b();L.hide()}if(g==39||h=="c"){b();L.next()}if(g==37||h=="g"){b();L.prev()}if((g==16||h=="i")&&!L.slideshow){b();L.play()}if((g==17||h=="p")&&L.slideshow){b();L.stop()}if(g==49){b();L.image(L.output,L.groupName,1)}if(g==50){b();L.image(L.output,L.groupName,2)}if(g==51){b();L.image(L.output,L.groupName,3)}if(g==52){b();L.image(L.output,L.groupName,4)}if(g==53){b();L.image(L.output,L.groupName,5)}if(g==54){b();L.image(L.output,L.groupName,6)}if(g==55){b();L.image(L.output,L.groupName,7)}if(g==56){b();L.image(L.output,L.groupName,8)}if(g==57){b();L.image(L.output,L.groupName,9)}}},removeAll:function(){L.content.style.display="none";L.wait.style.display="none";L.contentOverlay.style.display="none";L.loadcont.style.display="none"},pasteAll:function(){L.contentOverlay.style.display="";L.content.style.display="";L.wait.style.display="";L.loadcont.style.display=""},travers:function(d){var j,s,k,p,o,e,n,c,l,a,h,g;j=L.ie?window.event.srcElement:d.target;if(j.parentNode.tagName=="A"||j.tagName=="A"){j=j.tagName=="A"?j:j.parentNode;s=j.rel;if(s&&(/^iload(::.*)?/i.test(s))){if(L.ie){window.event.returnValue=false}else{d.preventDefault()}k=false;p=false;g=[];g[0]=j;if(/^iload::.+/i.test(s)){c=document.links;n=[];for(l=0;l<c.length;l++){a=c[l].rel;if(a==s){n.push(c[l])}}for(h=0;h<n.length;h++){if(j==n[h]){k=h+1;p=s.split("::")[1];g=n}}}var f=[];for(var b=0;b<g.length;b++){if(g[b].title){var m=g[b].title.split("::");e=m[0];o=m[1]?m[1]:false}else{o=false;e=false}f[b]=g[b].href;if(e&&o){f[b]=f[b]+"::"+e+"::"+o}else{if(e&&!o){f[b]=f[b]+"::"+e}else{if(!e&&o){f[b]=f[b]+"::::"+o}}}}L.image(f,p,k)}}else{if(j.className=="L_overlay"||j.className=="L_wrap"){L.hide()}}},hideLeftArr:function(b){if(L.arrows&&L.imageNav){L.animate(L.arrl,{left:0},L.arrowsSpeed,function(){L.loadcont.appendChild(L.arrl);if(b){b()}})}},showLeftArr:function(b){if(L.imageNav){L.imthis.style.cursor="pointer"}if(L.arrows&&L.imageNav){L.box.appendChild(L.arrl);L.animate(L.arrl,{left:-36},L.arrowsSpeed,function(){if(b){b()}})}},hideRightArr:function(b){if(L.arrows&&L.imageNav){L.animate(L.arrr,{right:0},L.arrowsSpeed,function(){L.loadcont.appendChild(L.arrr);if(b){b()}})}},showRightArr:function(b){if(L.imageNav){L.imthis.style.cursor="pointer"}if(L.arrows&&L.imageNav){L.box.appendChild(L.arrr);L.animate(L.arrr,{right:-36},L.arrowsSpeed,function(){if(b){b()}})}},cursortest:function(k){var p=-1,h=L.imthis.offsetWidth,m=L.imthis.offsetHeight,n=L.box.offsetTop,j=L.box.offsetLeft,o=1,l=1;L.cursorpos=L.cury>n+L.cornersSize+L.contentPadding&&L.cury<n+m+L.cornersSize+L.contentPadding?(L.curx>j+h/2+L.cornersSize+L.contentPadding&&L.curx<j+h+L.cornersSize+L.contentPadding?(L.total>1&&L.num<L.total?1:2):(L.curx>j+L.cornersSize+L.contentPadding&&L.curx<j+h/2+L.cornersSize+L.contentPadding?(L.total>1&&L.num-1>0?0:2):2)):2;if(L.cursorpos==1&&p!=1){p=1;L.hideLeftArr();L.showRightArr()}if(L.cursorpos==0&&p!=0){p=0;L.hideRightArr();L.showLeftArr()}if((L.cursorpos==2||k==1)&&p!=2){p=2;if(L.imageNav){L.imthis.style.cursor="default"}L.hideLeftArr();L.hideRightArr()}},play:function(){if(L.slideshow<1){L.slideshow=1;if(L.total>1&&L.num<L.total){L.next()}else{if(L.slideshowRound){L.image(L.output,L.groupName,1)}}}},stop:function(){if(L.slideshow&&!L.animating){L.slideshow=0;L.doslide();L.image(L.output,L.groupName,L.num)}},doslide:function(){var b;clearTimeout(b);if(L.slideshow&&!L.animating){b=setTimeout(function(){if(L.slideshow&&!L.animating){if(L.total>1&&L.num<L.total){L.next()}else{if(L.slideshowRound){L.image(L.output,L.groupName,1)}else{if(L.slideshowClose){L.hide()}L.slideshow=0;clearTimeout(b)}}}},L.slideshowTime)}},showLoader:function(){L.wait.style.visibility="visible";L.animate(L.contentOverlay,{opacity:0},L.loaderAppearSpeed)},hideLoader:function(b){L.animate(L.contentOverlay,{opacity:100},L.loaderDisappearSpeed,function(){L.wait.style.visibility="hidden";if(b){b()}})},image:function(f,h,j,i){if(L.ready&&!L.animating&&L.opened&&j>0&&j||1<=f.length){L.size=L.forceOriginalSize&&L.size==("computed"||"original")||L.size=="original"?"original":"computed";L.cornersSize=L.cornersSize<1?1:L.cornersSize;L.imthis=new Image();if(L.groupName==h){if(L.num==j-1&&L.imnext){L.imthis=L.imnext}else{if(L.num==j+1&&L.imprev){L.imthis=L.imprev}}}L.num=j||1;L.output=f;L.groupName=h;L.total=f.length;L.imageName=L.output[L.num-1].split("::")[1];L.imageDesc=L.output[L.num-1].split("::")[2];if(L.preloadNeighbours){if(L.output[L.num-2]){L.imprev=new Image();L.imprev.src=L.output[L.num-2].split("::")[0]}if(L.output[L.num]){L.imnext=new Image();L.imnext.src=L.output[L.num].split("::")[0]}}(function(){var o=0,k,l,c,n,m;L.imthis.onmousedown=function(a){k=L.curx;l=L.cury;m=L.imthis.style.cursor||"default";if(L.draganddrop){c=L.box.offsetLeft;n=L.box.offsetTop;o=1}if(L.ie){window.event.returnValue=false}else{a.preventDefault()}};L.imthis.onmouseup=function(){o=0;L.imthis.style.cursor=m};L.wrap.onmouseup=function(){o=0;L.imthis.style.cursor=m};L.wrap.onmousemove=function(){if(o){L.imthis.style.cursor="move";L.box.style.left=c+L.curx-k+"px";L.box.style.top=n+L.cury-l+"px"}};L.imthis.onclick=function(){if(k==L.curx&&l==L.cury&&L.cursorpos<2&&L.imageNav){if(L.cursorpos){L.next()}else{L.prev()}}};L.imthis.onmousemove=function(a){if(!o){L.cursortest()}if(L.ie){window.event.returnValue=false}else{a.preventDefault()}};L.imthis.onmouseout=function(){L.cursortest(1)}})();L.show(function(){var b=function(){L.imthis.src=L.output[L.num-1].split("::")[0];if(L.imthis.width&&L.imthis.height){g()}else{L.showLoader();L.imthis.onload=function(){L.hideLoader(function(){g()})};L.imthis.src=L.output[L.num-1].split("::")[0]}};if(!L.content.innerHTML){b()}else{var a=function(){L.contentOverlay.style.visibility="visible";L.animate(L.contentOverlay,{opacity:100},L.contentDisappearSpeed,function(){L.content.innerHTML="";b()})};if(L.bigpanelOpen&&L.panelType=="big"&&L.hidePWS){L.closePanel(a)}else{a()}}});function g(){L.loadcont.appendChild(L.imthis);var b=L.i(2)-L.cornersSize*2-L.contentPadding*2-(L.panelType=="big"?parseInt(36+L.cornersSize):0)-L.paddingFSE*2,a=L.i(1)-L.cornersSize*2-L.contentPadding*2-L.paddingFSE*2;iw=L.imthis.width,ih=L.imthis.height,_=1,iow=0,ioh=0,minimum=152-L.cornersSize*2-L.contentPadding*2,panel=(L.total>1||L.groupName)||L.imageName||L.imageDesc||(L.forceCloseBut&&L.panelType!='big')||L.info;L.panel.innerHTML=(L.imageName?'<div style="color:'+L.fontNameColor+';"><b>'+L.imageName+"</b></div>":"").concat((L.imageDesc?"<div>"+L.imageDesc+"</div>":""),(L.total>1||L.groupName?"<div>".concat(L.groupInfoText[0].replace("[IMAGE_NUM]",L.num).replace("[TOTAL_NUM]",L.total),(L.groupName?L.groupInfoText[1].replace("[GROUP_NAME]",L.groupName):""),"</div>"):""),(L.info?"<div>".concat(L.fileInfoText.replace("[FORMAT]",L.output[L.num-1].split("::")[0].match(/\.(\w+)($|#|\?)/)[1]).replace("[WIDTH]",iw).replace("[HEIGHT]",ih),"</div>"):""),((L.total>1||L.forceCloseBut||iw>a||ih>b)&&L.panelType!="big"?'<div class="L_buttons"><style type="text/css">.L_buttons i {background:'+L.containerColor+";}</style>".concat((L.total>1&&(L.slideshowRound||L.num!=L.total)?'<a href="javascript:L.'+(!L.slideshow?'play()" title="'+L.tips[3]+'" class=L_play':'stop()" title="'+L.tips[4]+'" class=L_stop')+"><b><i></i></b></a>":""),'<a title="'+L.tips[2]+'" class="L_hide" href="javascript:L.hide()"><b><i></i></b></a>',(L.total>1&&L.num>1?'<a title="'+L.tips[0]+'" class="L_prev" href="javascript:L.prev()"><b><i></i></b></a>':""),(L.total>1&&L.num<L.total?'<a title="'+L.tips[1]+'" class="L_next" href="javascript:L.next()"><b><i></i></b></a>':""),"</div>"):""));L.panel.style.width=L.imthis.offsetWidth+"px";L.loadcont.appendChild(L.panel);var c=function(){iw=iow||iw;ih=ioh||ih;iow=iw>a?a:iw;L.panel.style.width=iow+"px";ioh=ih/100*(100/iw*iow);ih=ioh;var d=parseInt(L.panel.offsetHeight+L.cornersSize+L.contentPadding);ioh=Math.round(ioh>b-d?b-d:ioh);iow=Math.round(iow/100*(100/ih*ioh));L.panel.style.width=iow+"px";if(ioh<minimum){iow=iow/100*(100/ioh*minimum);ioh=minimum;_=11}else{if(iow<minimum){ioh=ioh/100*(100/iow*minimum);iow=minimum;_=11}}if((ioh+L.panel.offsetHeight+L.cornersSize+L.contentPadding>b||iow>a)&&_<10){_++;c()}else{L.imthis.style.width=iow+"px";L.imthis.style.height=ioh+"px"}};if(L.size!="original"&&L.imthis.height>minimum&&L.imthis.width>minimum&&(iw>a-L.cornersSize*2-L.contentPadding*2||ih>b-L.cornersSize*2-L.contentPadding*2-(panel?L.panel.offsetHeight+L.cornersSize+L.contentPadding:0))){c()}iw=iow||iw;ih=ioh||ih;if(ih<minimum){L.imthis.style.paddingTop=(minimum-ih)/2+"px";L.imthis.style.paddingBottom=(minimum-ih)/2+"px"}if(iw<minimum){L.imthis.style.paddingLeft=(minimum-iw)/2+"px";L.imthis.style.paddingRight=(minimum-iw)/2+"px"}L.iSizeChanged=iow||ioh||L.size=="original"&&(iw>a-L.cornersSize*2-L.contentPadding*2||ih>b-L.cornersSize*2-L.contentPadding*2-(panel?L.panel.offsetHeight+L.cornersSize+L.contentPadding:0))?true:false;if(L.panelType=="big"){L.bigpanel.innerHTML="<i></i>".concat('<a title="'+L.tips[3]+'" class="L_play'+(L.total<2||(!L.slideshowRound&&L.num==L.total)||L.slideshow?" L_passive":"")+'" href="javascript:L.play()"><b></b></a><a title="'+L.tips[4]+'" class="L_stop'+(L.total<2||(!L.slideshowRound&&L.num==L.total)||!L.slideshow?" L_passive":"")+'" href="javascript:L.stop()"><b></b></a> <a title="'+L.tips[2]+'" class="L_hide" href="javascript:L.hide()"><b></b></a><a title="'+L.tips[0]+'" class="L_prev'+(L.num<2?" L_passive":"")+'" href="javascript:L.prev()"><b></b></a><a title="'+L.tips[1]+'" class="L_next'+(L.num==L.total?" L_passive":"")+'" href="javascript:L.next()"><b></b></a>','<div class="L_sizebut"><p></p>',(L.size=="original"?'<a title="'+L.tips[6]+'" class="L_comp" href="javascript:L.comp()"><b></b></a>':'<a title="'+L.tips[5]+'" class="L_orig" href="javascript:L.orig()"><b></b></a>'),"</div>")}else{if(L.iSizeChanged){L.panel.innerHTML=L.panel.innerHTML.replace(/<\/div>$/i,'<a class="L_'+(L.size=="original"?'comp" href="javascript:L.comp':'orig" href="javascript:L.orig')+'()"><b><i></i></b></a></div>')}}L.scale(L.imthis.offsetWidth+L.cornersSize*2+L.contentPadding*2,L.imthis.offsetHeight+L.cornersSize*2+L.contentPadding*2+(panel||L.iSizeChanged&&L.panelType!="big"?L.panel.offsetHeight+L.cornersSize+L.contentPadding:0),function(){L.content.appendChild(L.imthis);if(panel||L.iSizeChanged){L.content.appendChild(L.panel)}L.animate(L.wrap,{height:L.box.offsetHeight+(L.panelType=="big"?36+L.cornersSize+L.contentPadding:0)},L.contentAppearSpeed);L.animate(L.contentOverlay,{opacity:0},L.contentAppearSpeed,function(){L.contentOverlay.style.visibility="hidden";L.openPanel(L.iSizeChanged);L.cursortest();L.center();L.size=L.forceOriginalSize?"original":"computed";L.doslide();if(i){i()}})})}}}};L.create();